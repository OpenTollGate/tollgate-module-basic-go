# TIP-01 - Base Events
`draft` `mandatory` `kind=10021` `kind=21000` `kind=1022`

---
## TollGate Discovery
Tollgate Details / Advertisement is expressed through the following Nostr event
```json
{
    "kind": 10021,
    "pubkey": "24d6...3662", // TollGate identity
    // ...
    "tags": [
        ["metric", "<value>"],
        ["step_size", "<value>"],
        ["tips", "1", "2", "5", "..."]
    ]
}
```

Tags:
- `metric`: `milliseconds` or `bytes`
- `step_size`: positive whole number.
- `tips`: List of implemented TollGate TIP's represented as numbers

### Example
```json
{
    "kind": 10021,
    "pubkey": "24d6...3662",
    // ...
    "tags": [
        ["metric", "milliseconds"],
        ["step_size", "60000"], // 1 minute step size
        ["tips", "1", "2", "5", "..."]
    ]
}
```

## Payment
```json
{
	"kind": 21000,
	"pubkey": "63gy...9xvq", // Customer Identity, Can be randomly generated
	// ...
	"tags": [
		["p", "24d6...3662"], // TollGate identity (pubkey)
		["device-identifier", "<type>", "<value>"],
		["payment", "<bearer_asset>"]
	]
}
```

Tags:
- `p`: pubkey of the TollGate (from the TollGate Details event) who takes the payment
- `device-identifier`: (hardware) identifier of the customer's device. Second argument specifies type of identifier, third argument is the identifier value. `["device-identifier", "mac", "00:1A:2B:3C:4D:5E"]`
- `payment`: Bearer asset, such as Cashu token `["payment", "cashuB..."]`


## Session
```json
{
	"kind": 1022,
	"pubkey": "63gy...9xvq", // TollGate identity
	// ...
	"tags": [
		["p", "6hjq...1fi6"], // Customer identity (pubkey)
		["device-identifier", "<type>", "<value>"],
		["purchased_steps", "<amount>"]
	]
}
```

Tags:
- `p`: pubkey of the TollCustomer Gate (from the Customer's Payment event)
- `device-identifier`: (hardware) identifier of the customer's device.
- `purchased_steps`: Amount of steps allotted to customer after payment. Should be used by customer for internal measuring/acccounting.